_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"//g3":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c}));var r={toolbar:[[{header:"1"},{header:"2"},{header:[3,4,5,6]},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"],["code-block"]]},c=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","link","image","video","code-block"]},KQm4:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return c}))},MUZa:function(t,e,n){"use strict";n.r(e);var r=n("nKUr"),c=n("l4kR"),o=n("vC6e"),i=n("KQm4"),a=n("rePB"),u=n("q1tI"),s=n("20a2"),l=n("Vvt1"),b=n.n(l),f=n("iuBY"),j=n("abxw"),d=n("SMr6"),h=n("zycw"),p=n("//g3");function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=b()((function(){return Promise.all([n.e(0),n.e(9),n.e(6),n.e(10)]).then(n.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}}),y=Object(s.withRouter)((function(t){var e=t.router,n=Object(u.useState)(!!localStorage.getItem("blog")&&JSON.parse(localStorage.getItem("blog"))),c=n[0],o=n[1],s=Object(u.useState)({error:"",sizeError:"",success:"",formData:"",title:"",hidePublishButton:!1}),l=s[0],b=s[1],O=Object(u.useState)([]),y=O[0],x=O[1],v=Object(u.useState)([]),w=v[0],S=v[1],E=Object(u.useState)([]),P=E[0],k=E[1],T=Object(u.useState)([]),A=T[0],C=T[1];Object(u.useEffect)((function(){b(g(g({},l),{},{formData:new FormData})),B(),q()}),[e]);var _=l.error,D=(l.sizeError,l.success),N=l.formData,z=l.title,I=(l.hidePublishButton,Object(f.b)("token")),B=function(){Object(j.b)().then((function(t){t.error?b(g(g({},l),{},{error:t.error})):x(t)}))},q=function(){Object(d.b)().then((function(t){t.error?b(g(g({},l),{},{error:t.error})):S(t)}))},J=function(t){return function(e){var n,r="photo"===t?e.target.files[0]:e.target.value;N.set(t,r),b(g(g({},l),{},(n={},Object(a.a)(n,t,r),Object(a.a)(n,"formData",N),Object(a.a)(n,"error",""),n)))}},M=function(t){o(t),N.set("body",t),localStorage.setItem("blog",JSON.stringify(t))},U=function(t){t.preventDefault(),Object(h.a)(N,I).then((function(t){t.error?b(g(g({},l),{},{error:t.error})):(b(g(g({},l),{},{title:"",error:"",success:'A new blog titled "'.concat(t.title,'" was created.')})),o(""),k([]),C([]))}))},Z=function(t){return function(){b(g(g({},l),{},{error:""}));var e=P.indexOf(t),n=Object(i.a)(P);-1===e?n.push(t):n.splice(e,1),k(n),N.set("categories",n)}},F=function(t){return function(){b(g(g({},l),{},{error:""}));var e=A.indexOf(t),n=Object(i.a)(A);-1===e?n.push(t):n.splice(e,1),C(n),N.set("tags",n)}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"alert",style:{display:_?"block":"none"},children:_}),Object(r.jsx)("div",{className:"alert",style:{display:D?"block":"none"},children:D}),Object(r.jsxs)("form",{onSubmit:U,children:[Object(r.jsx)("label",{children:"Title"}),Object(r.jsx)("input",{type:"text",value:z,onChange:J("title")}),Object(r.jsx)("div",{className:"quill",children:Object(r.jsx)(m,{modules:p.b,formats:p.a,value:c,placeholder:"Write something awesome.",onChange:M})}),Object(r.jsx)("button",{type:"submit",children:"Publish"})]}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:"Categories"}),Object(r.jsx)("ul",{children:y&&y.map((function(t,e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:Z(t._id)}),Object(r.jsx)("label",{children:t.name})]},e)}))}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:"Tags"}),Object(r.jsx)("ul",{children:w&&w.map((function(t,e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:F(t._id)}),Object(r.jsx)("label",{children:t.name})]},e)}))}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:"Featured image"}),Object(r.jsx)("small",{children:"Max size: 1mb"}),Object(r.jsxs)("label",{children:["Upload featured image",Object(r.jsx)("input",{type:"file",accept:"image/*",onChange:J("photo"),hidden:!0})]})]})}));n("YFqc"),e.default=function(){return Object(r.jsx)(c.a,{children:Object(r.jsxs)(o.a,{children:[Object(r.jsx)("h2",{children:"Create a new blog"}),Object(r.jsx)(y,{})]})})}},SMr6:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return s}));var r=n("LpSC"),c=n.n(r),o=n("obyI"),i=function(t,e){return c()("".concat(o.a,"/tag"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},a=function(){return c()("".concat(o.a,"/tags"),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},u=function(t){return c()("".concat(o.a,"/tag/").concat(t),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},s=function(t,e){return c()("".concat(o.a,"/tag/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}},abxw:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return s}));var r=n("LpSC"),c=n.n(r),o=n("obyI"),i=function(t,e){return c()("".concat(o.a,"/category"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},a=function(){return c()("".concat(o.a,"/categories"),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},u=function(t){return c()("".concat(o.a,"/category/").concat(t),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},s=function(t,e){return c()("".concat(o.a,"/category/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}},eZ7Z:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/blog",function(){return n("MUZa")}])},vC6e:function(t,e,n){"use strict";var r=n("nKUr"),c=n("q1tI"),o=n("20a2"),i=n.n(o),a=n("iuBY");e.a=function(t){var e=t.children;return Object(c.useEffect)((function(){Object(a.c)()?1!==Object(a.c)().role&&i.a.push("/"):i.a.push("/signin")}),[]),Object(r.jsx)(r.Fragment,{children:e})}}},[["eZ7Z",1,0,2,3]]]);