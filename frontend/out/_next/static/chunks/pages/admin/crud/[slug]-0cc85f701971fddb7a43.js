_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"//g3":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c}));var r={toolbar:[[{header:"1"},{header:"2"},{header:[3,4,5,6]},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"],["code-block"]]},c=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","link","image","video","code-block"]},KQm4:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return c}))},SMr6:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return s}));var r=n("LpSC"),c=n.n(r),o=n("obyI"),i=function(t,e){return c()("".concat(o.a,"/tag"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},a=function(){return c()("".concat(o.a,"/tags"),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},u=function(t){return c()("".concat(o.a,"/tag/").concat(t),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},s=function(t,e){return c()("".concat(o.a,"/tag/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}},abxw:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return s}));var r=n("LpSC"),c=n.n(r),o=n("obyI"),i=function(t,e){return c()("".concat(o.a,"/category"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},a=function(){return c()("".concat(o.a,"/categories"),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},u=function(t){return c()("".concat(o.a,"/category/").concat(t),{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},s=function(t,e){return c()("".concat(o.a,"/category/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}},iT7G:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/[slug]",function(){return n("we8M")}])},vC6e:function(t,e,n){"use strict";var r=n("nKUr"),c=n("q1tI"),o=n("20a2"),i=n.n(o),a=n("iuBY");e.a=function(t){var e=t.children;return Object(c.useEffect)((function(){Object(a.c)()?1!==Object(a.c)().role&&i.a.push("/"):i.a.push("/signin")}),[]),Object(r.jsx)(r.Fragment,{children:e})}},we8M:function(t,e,n){"use strict";n.r(e);var r=n("nKUr"),c=n("l4kR"),o=n("vC6e"),i=n("KQm4"),a=n("rePB"),u=n("q1tI"),s=n("20a2"),l=n("Vvt1"),b=n.n(l),f=n("iuBY"),d=n("abxw"),j=n("SMr6"),h=n("zycw"),p=n("//g3"),O=n("obyI");function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=b()((function(){return Promise.all([n.e(0),n.e(9),n.e(6),n.e(10)]).then(n.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}}),x=Object(s.withRouter)((function(t){var e=t.router,n=Object(u.useState)(""),c=n[0],o=n[1],s=Object(u.useState)([]),l=s[0],b=s[1],g=Object(u.useState)([]),x=g[0],v=g[1],w=Object(u.useState)([]),S=w[0],E=w[1],k=Object(u.useState)([]),T=k[0],_=k[1],P=Object(u.useState)({title:"",error:"",success:"",formData:"",body:""}),A=P[0],C=P[1],D=A.title,q=A.error,N=A.success,z=A.formData,B=Object(f.b)("token");Object(u.useEffect)((function(){C(m(m({},A),{},{formData:new FormData})),I(),F(),U()}),[e]);var I=function(){e.query.slug&&Object(h.g)(e.query.slug).then((function(t){t.error?console.log("Error getting blog"):(C(m(m({},A),{},{title:t.title})),o(t.body),G(t.categories),M(t.tags))}))},G=function(t){var e=[];t.map((function(t,n){e.push(t._id)})),E(e)},M=function(t){var e=[];t.map((function(t,n){e.push(t._id)})),_(e)},F=function(){Object(d.b)().then((function(t){t.error?C(m(m({},A),{},{error:t.error})):b(t)}))},U=function(){Object(j.b)().then((function(t){t.error?C(m(m({},A),{},{error:t.error})):v(t)}))},J=function(t){return function(){C(m(m({},A),{},{error:""}));var e=S.indexOf(t),n=Object(i.a)(S);-1===e?n.push(t):n.splice(e,1),E(n),z.set("categories",n)}},K=function(t){return function(){C(m(m({},A),{},{error:""}));var e=T.indexOf(t),n=Object(i.a)(T);-1===e?n.push(t):n.splice(e,1),_(n),z.set("tags",n)}},L=function(t){o(t),z.set("body",t)},R=function(t){return function(e){var n,r="photo"===t?e.target.files[0]:e.target.value;z.set(t,r),C(m(m({},A),{},(n={},Object(a.a)(n,t,r),Object(a.a)(n,"formData",z),Object(a.a)(n,"error",""),n)))}},Y=function(t){t.preventDefault(),Object(h.h)(z,B,e.query.slug).then((function(t){t.error?C(m(m({},A),{},{error:t.error})):C(m(m({},A),{},{success:"Blog ".concat(t.title," has been updated.")}))}))};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"alert",style:{display:q?"block":"none"},children:q}),Object(r.jsx)("div",{className:"alert",style:{display:N?"block":"none"},children:N}),Object(r.jsxs)("form",{onSubmit:Y,children:[Object(r.jsx)("label",{children:"Title"}),Object(r.jsx)("input",{type:"text",value:D,onChange:R("title")}),Object(r.jsx)("div",{className:"quill",children:Object(r.jsx)(y,{modules:p.b,formats:p.a,value:c,placeholder:"Write something awesome.",onChange:L})}),Object(r.jsx)("button",{type:"submit",children:"Update"})]}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:"Categories"}),l&&l.map((function(t,e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:J(t._id),checked:(n=t._id,-1!==S.indexOf(n))}),Object(r.jsx)("label",{children:t.name})]},e);var n})),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:"Tags"}),x&&x.map((function(t,e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:K(t._id),checked:(n=t._id,-1!==T.indexOf(n))}),Object(r.jsx)("label",{children:t.name})]},e);var n})),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:"Featured image"}),c&&Object(r.jsx)("img",{src:"".concat(O.a,"/blog/photo/").concat(e.query.slug),alt:D}),Object(r.jsx)("small",{children:"Max size: 1mb"}),Object(r.jsxs)("label",{children:["Replace featured image",Object(r.jsx)("input",{type:"file",accept:"image/*",onChange:R("photo"),hidden:!0})]})]})}));n("YFqc"),e.default=function(){return Object(r.jsx)(c.a,{children:Object(r.jsxs)(o.a,{children:[Object(r.jsx)("h2",{children:"Update blog"}),Object(r.jsx)(x,{})]})})}}},[["iT7G",1,0,2,3]]]);